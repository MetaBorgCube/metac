module desugar-functions

language Metac

test desugar parameter [[
  extern unsigned const int g(unsigned volatile int a) {
    return a;
  }
]] run desugar-all to Declarations([
    FunDefinition(
      Identifier(_),
      [Extern()],
      Type([Const], UInt32),
      [FunDefinitionParameter(
        Type([Volatile], UInt32),
        Declarator(_, _),
        Decl(Identifier(_))
      )],
      CompoundStatement(_){_}
    )
  ])

test desugar parameter type with pointer [[
  int32 g(int32 *x) {
    return &x;
  }
]] run strip-annos to Declarations([
    FunDefinition(
      Identifier(_),
      [],
      Type([], Int32),
      [FunDefinitionParameter(
        Type([], Pointer(Int32)),
        Declarator(_, _),
        Decl(_)
      )],
      _
    )
  ])
